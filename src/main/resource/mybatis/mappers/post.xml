<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="post">
	
	
	
	<insert id="insert" parameterType="postvo">
		<![CDATA[
			insert into post(title, content, regdate, post_image, publish, users_no) values
				(#{title},#{content}, now(), #{post_image}, #{publish}, #{users_no} );
		]]>
	</insert>
	
	
	
	
	<select id="getPostList" parameterType="int" resultType="postvo">
		<![CDATA[
		select users_no, post_no, title, content, regdate, post_image, publish from post 
	 	where post.users_no = #{users_no} order by post_no desc
		]]>
	</select>
	
	<select id = "getListByPage" parameterType="map" resultType="postvo">
		<![CDATA[
		 select a.post_no, a.title, a.content, date_format(a.regdate, '%Y %m/%e %h:%i') as regdate , a.publish
 		 from post a, users b where b.users_no = a.users_no and b.users_no = #{users_no} and a.users_no > 0
 		 order by a.post_no desc
 		 limit #{page }, 9;
		]]>
	</select>
	
	<select id = "getIndexByPostTop9" parameterType="int" resultType="postvo">
		<![CDATA[
		 select a.post_no ,a.title, date_format(a.regdate, '%Y %m/%e %h:%i') as regdate , a.publish, a.post_image
 		 from post a, users b where b.users_no = a.users_no and b.users_no = #{users_no} and a.users_no > 0
 		 order by a.post_no desc limit 0, 9;
		]]>
	</select>
	
	<select id = "getPost" parameterType="int" resultType = "postvo">
		<![CDATA[
			 SELECT a.post_no,
			       a.title,
			       a.content,
			       a.regdate,
			       a.post_image,
			       a.publish, b.nickname
				   FROM post a, users b
				   WHERE a.users_no = b.users_no and a.post_no = #{post_no}
		]]>
	</select>
	
	
	<select id = "postdelete"  resultType="postvo">
		<![CDATA[
		delete from post where users_no = #{users_no} and post_no= #{post_no}
		]]>
	</select>
	
	
	
	
	
	

</mapper>
